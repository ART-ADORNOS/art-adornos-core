name: Docker Image â€” Production

on:
  push:
    tags:
      - "v*.*.*"
      - "!v*.*.*-dev.*"

jobs:
  docker:
    if: "!contains(github.ref_name, '-dev.')"
    uses: freddyandreszambrano/Platform-CI/.github/workflows/django-docker-image.yml@main
    with:
      docker_image: ${{ vars.DOCKER_IMAGE }}
      dockerfile: Dockerfile.production
    secrets:
      DOCKER_USERNAME: ${{ secrets.DOCKER_USERNAME }}
      DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
